# Stock Report Generation System - Apache Configuration
# PHP 5.5 Compatible

# Protect sensitive files
<FilesMatch "^(reportSettings\.json|\.env)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# File upload settings
php_value upload_max_filesize 10M
php_value post_max_size 10M

# URL Rewriting - Route all requests through public/
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # Prevent direct access to app directory
    RewriteRule ^app/ - [F,L]

    # Allow direct access to asset directories
    RewriteRule ^(reports|images|data)/ - [L]

    # Serve static assets from public/assets/
    RewriteRule ^assets/(.*)$ public/assets/$1 [L]

    # Rewrite reportManager.html to public/index.php
    RewriteRule ^reportManager\.html$ public/index.php [L,QSA]

    # Rewrite root and index.php to public/index.php
    RewriteRule ^index\.php$ public/index.php [L,QSA]
    RewriteRule ^$ public/index.php [L,QSA]
</IfModule>
